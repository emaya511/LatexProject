\documentclass[tikz,border=10pt]{standalone}
\usepackage{amsmath}
\usepackage{comment}
\usetikzlibrary{arrows.meta}
\usepackage{pgfplots}
\usepgfplotslibrary{fillbetween}
\usetikzlibrary{fadings}
\tikzfading[name=myfading, bottom color=transparent!100, top color=transparent!0]

\directlua{
function coth (i) 
  return math.cosh(i) / math.sinh(i)
end

function sins (i) 
  return math.sin(i)
end

function brillouin (J, x) 
  if x == 0 then
    return 0
  else
   return (2*J+1)/(2*J)*coth((2*J+1)/(2*J)*x) - 
        1/(2*J)*coth(1/(2*J)*x)
  end
end
}
\pgfmathdeclarefunction{Brillouin}{2}{%
  \edef\pgfmathresult{%
     \directlua{tex.print("" .. brillouin(#1,#2))}%
   }%  
}
\begin{document}
\begin{comment}
\begin{tikzpicture}[
    x                = 2cm/10,
    scale            = 3,
    axis/.style      = {help lines, -{Stealth[length = 1.5ex]}},
    brillouin/.style = {domain = -5:10, samples = 100}
  ]
  %\draw [axis] (-5,0) -- (10,0);
  %\draw [axis] (0,-1) -- (0,1.5);
  %\draw [densely dotted] (0,{ Brillouin(1, 100)} ) -- ++(10,0);
  \draw [red]   plot [brillouin] (\x, { sins(2,  \x)});
  \draw [green] plot [brillouin] (\x, { Brillouin(5,  \x)});
  \draw [blue]  plot [brillouin] (\x, { Brillouin(50, \x)});
 % \node [align = center, anchor = west] at (1,1.3) {%
   % $\begin{alignedat}{2}
   %   B_J(x) &= \tfrac{2J + 1}{2J}
   %             &&\coth \left ( \tfrac{2J + 1}{2J} x \right ) \\
    %         &\quad - \tfrac{1}{2J}
    %            &&\coth \left ( \tfrac{1}{2J} x \right )
  %   \end{alignedat}$};
\end{tikzpicture}
\end{comment}

 \begin{tikzpicture}
%\draw[help lines] (0,0) grid (2,3);
%\draw[step=0.5, gray, very thin] (-1.4,-1.4) grid (1.4,1.4);
%\draw (0,0) parabola (1,1.5) parabola[bend at end] (2,0);
%\draw (0,0) sin (1,1) cos (2,0) sin (3,-1) cos (4,0) sin (5,1);
%\draw [domain=0.5:1.25, samples=50] plot (\x, {0.1+sin(\x r)});
%\draw [green, dashed, domain=0:2*3.14, samples=50] plot (\x, {sin(\x r)});
%\draw [domain=0.5:1.25, samples=50] plot (\x, {-0.1+sin(\x r)});

%\draw (0,0) circle (0.4);
\shade[top color=lightgray, bottom color=gray] (0,0) circle (0.4);
\shade[top color=lightgray, bottom color=gray] (0,5) circle (0.4);


\draw [very thick ](0.4,5) -- (0.4,3);
\draw [very thick ](0.4,2.9) -- (0.4,0);

\draw [very thick ] (0.4,5) arc (0:45:0.4);
\draw [very thick ](0.2828,0.2828+5) -- (0.2828-1,0.2828+5+1);

%\draw [very thick ] (0.4,0) arc (360-45:0:0.4);
\draw[very thick ] (0.2828,-0.2828)  arc[radius = 0.4, start angle= 315, end angle= 360];

\draw [very thick ](0.2828,-0.2828) -- (0.2828-1,-0.2828-1);

\draw [fill=green] (0.35,0.6) -- (0.35-0.2,0.6-0.05) -- (0.35-0.2,0.6+0.05) -- cycle;

\draw [fill=green] (0.45,0.6) -- (0.45+0.2,0.6-0.05) -- (0.45+0.2,0.6+0.05) -- cycle;

\filldraw[fill=red] (0.25,0.8) rectangle (0.32,1);

\filldraw[fill=red] (0.48,0.8) rectangle (0.56,1);
 \begin{axis}[]

    \addplot[blue, name path=A,mark=none] coordinates {(-10,2) (8,2)};
    \addplot[transparent, name path=B,mark=none] coordinates {(-10,2) (8,0.4)};
    \addplot[top color=blue, bottom color=white] fill between[of=A and B];

    \addplot[red, name path=C, mark=none] coordinates {(-11,1.7) (7,1.7)};
    \addplot[transparent, name path=D,mark=none] coordinates {(-11,1.3) (7,1.3)};
    \addplot[top color=red, bottom color=white] fill between[of=C and D];

    \addplot[red, name path=E, mark=none] coordinates {(-11,1.1) (7,1.1)};
    \addplot[transparent, name path=F,mark=none] coordinates {(-11,0.7) (7,0.7)};
    \addplot[path fading=myfading, fill=red] fill between[of=E and F];
  \end{axis}



 \end{tikzpicture}

 
\end{document}